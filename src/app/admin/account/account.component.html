<div nz-row>
  <div nz-col nzSpan="21">
    <form nz-form class="mt-5" [formGroup]="formSearch">
      <div nz-row>
        <div nz-col nzSpan="12">
          <nz-form-item>
            <nz-form-control [nzSm]="12" [nzXs]="24">
              <input
                nz-input
                type="text"
                formControlName="valueSearch"
                id="valueSearch"
                placeholder="Nhập email hoặc số điện thoại để tìm?"
              />
            </nz-form-control>
            <button class="btnSearch" nz-button (click)="timkiem()" [nzType]="'primary'"><span>Tìm kiếm</span></button>
          </nz-form-item>
        </div>
      </div>

    </form>
  </div>

  <div nz-col nzSpan="3">
    <button
      class="mb-3 mt-5"
      nz-button
      [nzType]="'primary'"
      (click)="showModal()"
    >
      <span>Thêm mới</span>
    </button>
    <nz-modal
      [(nzVisible)]="isVisible"
      (nzOnCancel)="handleCancel()"
      (nzOnOk)="handleOk()"
    >
      <ng-container *nzModalContent>
        <form nz-form [formGroup]="formAcc">
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email"
              >Email</nz-form-label
            >
            <nz-form-control
              [nzSm]="14"
              [nzXs]="24"
              nzErrorTip="Bạn phải nhập đúng định dạng email!"
            >
              <input
                nz-input
                type="email"
                formControlName="email"
                id="email"
              />
            </nz-form-control>
          </nz-form-item>
          <nz-form-item *ngIf="!formAcc.value.id">
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="password"
              >Mật khẩu</nz-form-label
            >
            <nz-form-control
              [nzSm]="14"
              [nzXs]="24"
              nzErrorTip="Mật khẩu không được để trống!"
            >
              <input
                nz-input
                type="password"
                formControlName="password"
                id="password"
              />
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="phoneNumber"
              >Số ĐT</nz-form-label
            >
            <nz-form-control
              [nzSm]="14"
              [nzXs]="24"
              nzErrorTip="SDT không được để trống!"
            >
              <input
                nz-input
                type="text"
                formControlName="phoneNumber"
                id="phoneNumber"
              />
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="status"
              >Trạng thái</nz-form-label
            >
            <nz-radio-group
              class="mt-1"
              formControlName="status"
              nzName="status"
            >
              <label nz-radio [nzValue]="1" nzValue="1">Active</label>
              <label nz-radio [nzValue]="0" nzValue="0">InActive</label>
            </nz-radio-group>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="role"
              >Phân quyền</nz-form-label
            >
            <nz-radio-group class="mt-1" formControlName="role" nzName="role">
              <label nz-radio [nzValue]="1">Admin</label>
              <label nz-radio [nzValue]="2">User</label>
            </nz-radio-group>
          </nz-form-item>
        </form>
      </ng-container>
    </nz-modal>
  </div>
</div>
<!--  ---------------------------------  -->
<nz-table *ngIf="datas">
  <thead>
    <tr>
      <th>Mã TK</th>
      <th>Email</th>
      <th>Số ĐT</th>
      <th>Role</th>
      <th>Trạng thái</th>
      <th colSpan="2">Thao tác</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of datas">
      <td>{{ item.id }}</td>
      <td>{{ item.email }}</td>
      <td>{{ item.phoneNumber}}</td>
      <td *ngIf="item.roles">{{ item.roles![0].roleName }}</td>
      <td *ngIf="item.status">Active</td>
      <td *ngIf="!item.status">InActive</td>
      <td style="text-align: center;">
        <span class="btnUpdate" nz-icon nzType="edit" (click)="getInfoAccount(item.id)" nzTheme="outline"></span>
        <span class="btnDelete" nz-icon nzType="delete" (click)="deleteAccount(item.id)" nzTheme="outline"></span>
      </td>
    </tr>
  </tbody>
</nz-table>
<div class="footer">
  <div>
    <nav class="mr-3" aria-label="..." *ngIf="Page">
      <ul class="pagination justify-content-end">
        <select #selectSize (change)="pageItem(selectSize.value)"  class="page-items" >
          <option selected >3</option>
          <option >5</option>
          <option >8</option>
        </select>
        <li class="page-item " [ngClass]="offset == 0?'disabled':''">
          <a class="page-link" (click)="preNextPage('pre')">Previous</a>
        </li>

        <li *ngFor="let Page of [].constructor(Page['totalPages']);let i = index"
            class="page-item" [ngClass]="offset == i?'active':''">
          <a class="page-link" (click)="pagination(i)">{{i + 1}}</a>
        </li>

        <li class="page-item" [ngClass]="(Page['totalPages'] - 1) == offset?'disabled':''">
          <a class="page-link" (click)="preNextPage('next')">Next</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
